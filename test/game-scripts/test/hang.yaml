disabled: false
game-config:
  type: HOLDEM
  max-players: 9
  min-players: 3
  min-buyin: 60.0
  max-buyin: 300.0
  auto-start: false
  auto-approve: true
  title: preflop-one-player-all-in and others folded
  sb: 1.0
  bb: 2.0

# players in the game
players:
  - name: player1
    id: 1
  - name: player2
    id: 2
  - name: player3
    id: 3
  - name: player4
    id: 4
  - name: player5
    id: 5
  - name: player6
    id: 6
  - name: player7
    id: 7
  - name: player8
    id: 8

# after the table is initialized
# the players will sit in the table
# test driver will validate the sitting process worked correctly
# after players sat on the table, the seat numbers will be used by the game
# the player ids are only used for settling balances at the end in the database
take-seat:
  button-pos: 1
  seats:
    -
      seat: 1 
      player: 1
      buy-in: 100
    -
      seat: 2 
      player: 2
      buy-in: 100
    -
      seat: 3 
      player: 3
      buy-in: 100
    -
      seat: 4 
      player: 4
      buy-in: 100
    -
      seat: 5 
      player: 5
      buy-in: 100
    -
      seat: 6 
      player: 6
      buy-in: 100
    -
      seat: 7 
      player: 7
      buy-in: 100
    -
      seat: 8 
      player: 8
      buy-in: 100

  # wait for one second delay for the game to settle
  wait: 1

# deal the following hands in the table
hands:
  -
    num: 1
    setup:
      button-pos: 1
      flop: ["Ac", "Ad", "2c"]
      turn: Td
      river: 4s
      seat-cards:
        - 
          cards: ["2d", "Ad"]
        -
          cards: ["4h", "4s"]
        -
          cards: ["Td", "6c"]
        -
          cards: ["6h", "7d"]
        -
          cards: ["5d", "Qc"]
        -
          cards: ["As", "8d"]
        -
          cards: ["9h", "3h"]
        -
          cards: ["Ac", "3s"]
          
      # here the game engine sends the cards to the players
      verify:
        # verify button, sb, bb positions
        # verify next action seat position
        # verify current hand state
        button: 1
        sb: 2
        bb: 3
        next-action-pos: 4
        state: PREFLOP
   
    # simulate pre-flop action
    preflop-action:
      seat-actions:
        - 4, CALL, 2
        - 5, CALL, 2
        - 6, CALL, 2
        - 7, CALL, 2
        - 8, CALL, 2
        - 1, ALLIN
        - 2, FOLD
        - 3, FOLD
        - 4, FOLD
        - 5, FOLD
        - 6, FOLD
        - 7, FOLD
        - 8, FOLD

      # verify preflop-action result
      # since both players folded, the round ended with a hand result
      verify:
        state: RESULT

