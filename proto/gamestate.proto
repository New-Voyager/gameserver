syntax = "proto3";
package game;
option go_package = "game";


enum PlayerStatus {
  PLAYING = 0;
  IN_QUEUE = 1;
  BREAK = 2;
  STANDING_UP = 3;
  LEFT = 4;
  KICKED_OUT = 5;
  BLOCKED = 6;
  WAIT_FOR_SITTING_APPROVAL = 7;
  LOST_CONNECTION = 8;
}

message PlayerState {
  float buy_in = 1;
  float current_balance = 2;
  PlayerStatus status = 3;
}

enum GameType {
  UNKNOWN = 0;
  HOLDEM = 1;
  PLO = 2;
  PLO_HILO = 3;
}


enum GameStatus {
  INITIALIZED = 0;
  RUNNING = 1;
  PAUSED = 2;
  WAITING_FOR_PLAYERS = 3;
  ENDED = 4;
  START_GAME_RECEIVED = 5;
  PAUSE_GAME_RECEIVED = 6;
  END_GAME_RECEIVED = 7;
}

message GameState {

  uint32 club_id = 1;
  uint64 game_id = 2;   // game id is unique in the system
  // max 15 seats reserved

  // index 0-8 for 9 seats
  // the array item is player id
  // if array item is 0, that means the seat is empty 
  repeated uint32 players_in_seats = 3 [packed=true];

  // players in the table and the queue
  repeated uint32 players_in_game = 4 [packed=true];

  // players who participated in the game
  map<uint32, PlayerState> players_state = 5;

  bool utg_straddle_allowed = 6;

  bool button_straddle_allowed = 7;

  // game status
  GameStatus status = 8;

  // game type
  GameType game_type = 9;

  // current hand num
  uint32 hand_num = 10;

  uint32 button_pos = 11;

  float small_blind = 12;

  float big_blind = 13;

  uint32 max_seats = 14;
  uint32 min_players = 15;
}
